!function(){"use strict";angular.module("phidias-angular",["ngAria","ngSanitize","angular-sortable-view","textAngular","angularFileUpload","mgcrea.ngStrap"])}(),function(){"use strict";function e(){return function(e,t){if(isNaN(parseFloat(e))||!isFinite(e))return"-";"undefined"==typeof t&&(t=1);var n=["bytes","kB","MB","GB","TB","PB"],i=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(i))).toFixed(t)+" "+n[i]}}angular.module("phidias-angular").filter("bytes",e)}(),function(){"use strict";function e(){return function(e){var t=[];return void 0==e?t:(e.split("\n").map(function(e){var n=e.trim();n.length>0&&t.push(n)}),t)}}angular.module("phidias-angular").filter("lines",e)}(),function(){"use strict";function e(){return function(e){return moment(1e3*e).calendar()}}function t(){return function(e,t){return moment(1e3*e).format(t)}}function n(){return function(e){return moment(1e3*e).fromNow()}}angular.module("phidias-angular").filter("momentCalendar",e).filter("momentFormat",t).filter("momentFromNow",n)}(),function(){"use strict";function e(e){return e.trustAsResourceUrl}function t(e){return e.trustAsUrl}function n(e){return e.trustAsHtml}angular.module("phidias-angular").filter("trustAsResourceUrl",e).filter("trustAsUrl",t).filter("trustAsHtml",n),e.$inject=["$sce"],t.$inject=["$sce"],n.$inject=["$sce"]}(),function(){"use strict";angular.module("phidias-angular").directive("bindPolymer",["$parse",function(e){return{restrict:"A",scope:!1,compile:function(t,n){var i={};for(var o in n)if(angular.isString(n[o])){var l=n[o].match(/\{\{\s*([\.\w]+)\s*\}\}/);l&&(i[o]=e(l[1]))}return function(e,t,n){t=void 0==t[0].tagName?angular.element(t[0].nextElementSibling):t,Object.keys(i).forEach(function(o){n.$observe(o,function(e){t[0].set(o,e)});var l=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();t.on(l+"-changed",function(t){e.$evalAsync(function(){i[o](e)!==t.detail.value&&i[o].assign(e,t.detail.value)})})})}}}}])}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,n){var i=n.phiColorTint;t.prepend('<div class="phi-color-tint" style="background-color: '+i+'" />')}}}angular.module("phidias-angular").directive("phiColorTint",e)}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,n,i){angular.element(e[0].body).append(n),t.$on("$destroy",function(){n.remove()})}}}angular.module("phidias-angular").directive("phiModal",e),e.$inject=["$document"]}(),function(){"use strict";function e(e){function t(e,t,n){var i=[];e.activeClass="phi-switch-active"+(e.customClassName?" "+e.customClassName:""),e.controls=void 0!=e.controls?e.controls:{},e.controls={activeIndex:null,length:0,select:function(n){i=t.children(),this.length=i.length,i.length&&(n>=i.length?n%=i.length:n<0&&(n=i.length+n),void 0!=i[n]&&(null!==this.activeIndex&&void 0!=i[this.activeIndex]&&angular.element(i[this.activeIndex]).removeClass(e.activeClass),angular.element(i[n]).addClass(e.activeClass),this.activeIndex=n,e.onChange()))},next:function(){e.controls.select(e.controls.activeIndex+1)},previous:function(){e.controls.select(e.controls.activeIndex-1)},hasNext:function(){return void 0!=i[e.controls.activeIndex+1]},hasPrevious:function(){return void 0!=i[e.controls.activeIndex-1]}}}return{restrict:"A",scope:{controls:"=phiSwitch",customClassName:"@phiSwitchActiveClass",onChange:"&"},link:t}}angular.module("phidias-angular").directive("phiSwitch",e),e.$inject=["$timeout"]}(),angular.module("phidias-angular").directive("phiPosition",["phiCoordinates",function(e){return{restrict:"A",scope:{},link:function(t,n,i){n.parent().css("position","relative"),n.css("position","absolute"),t.reposition=function(t){var i=e.getBounds(n),o=e.parseAlignmentString(t)||{vertical:"top",horizontal:"left"},l={top:"auto",left:"auto",bottom:"auto",right:"auto",marginTop:0,marginLeft:0};switch(o.vertical){case"top":l.top="10px";break;case"center":l.top="50%",l.marginTop=i.height*-.5+"px";break;case"bottom":l.bottom="10px"}switch(o.horizontal){case"left":l.left="10px";break;case"center":l.left="50%",l.marginLeft=i.width*-.5+"px";break;case"right":l.right="10px"}n.css(l)},i.$observe("phiPosition",function(e){t.reposition(e)})}}}]),function(){"use strict";function e(e,n,i){function o(o,l,a){function r(){"true"==l.attr("phi-visible")?c():s()}function s(){l.attr("phi-visible",!0),d(),i(function(){n.bind("click",c)})}function c(){l.attr("phi-visible",!1),d(),n.unbind("click",c)}function d(){var t=angular.element(document.getElementById(a.phiTooltipFor));if(t.length){var n=e.getBounds(l),i=e.getBounds(t),o={top:0,left:0},r=e.parseAlignmentString(a.phiTooltipAlign)||{vertical:"bottom",horizontal:"left"};switch(r.vertical){case"top":o.top+=i.top;break;case"center":o.top+=i.top+i.height/2;break;case"bottom":o.top+=i.top+i.height}switch(r.horizontal){case"left":o.left+=i.left;break;case"center":o.left+=i.left+i.width/2;break;case"right":o.left+=i.left+i.width}var s=e.parseAlignmentString(a.phiTooltipOrigin)||{vertical:"top",horizontal:"left"};switch(s.vertical){case"bottom":o.top-=n.height;break;case"center":o.top-=n.height/2}switch(s.horizontal){case"right":o.left-=n.width;break;case"center":o.left-=n.width/2}var c={top:o.top+"px",left:o.left+"px",right:"auto",bottom:"auto"};"width"==a.phiTooltipMatch?c.minWidth=i.width+"px":"height"==a.phiTooltipMatch&&(c.minHeight=i.height+"px"),l.css(c)}}l.css("position","absolute"),t++,o.uniqueId=t;var u=angular.element(document.getElementById(a.phiTooltipFor));u.data("phiTooltipId",o.uniqueId),void 0!=a.phiTooltipAutoToggle&&(c(),u.bind("click",r)),a.$observe("phiTooltipFor",function(){d()}),a.$observe("phiTooltipAlign",function(){d()}),a.$observe("phiTooltipOrigin",function(){d()}),a.$observe("phiVisible",function(e){d()})}return{restrict:"A",link:o}}angular.module("phidias-angular").directive("phiTooltipFor",e);var t=0;e.$inject=["phiCoordinates","$document","$timeout"]}(),angular.module("phidias-angular").directive("phiViewportLeave",["$window","phiCoordinates","$timeout",function(e,t,n){return{restrict:"A",link:function(n,i,o){var l=e.scrollY;angular.element(e).bind("scroll",function(){var a=t.getBounds(i),r=null;l<a.top&&a.top<=e.scrollY?r={direction:"up"}:l+e.innerHeight>a.bottom&&a.bottom>=e.scrollY+e.innerHeight&&(r={direction:"down"}),r&&(n.$eval(o.phiViewportLeave,{event:r}),n.$apply()),l=e.scrollY})}}}]),angular.module("phidias-angular").directive("phiViewportLeaveEnd",["$window","phiCoordinates","$timeout",function(e,t,n){return{restrict:"A",link:function(n,i,o){var l=e.scrollY;n.scrollListener=function(){var a=t.getBounds(i),r=null;l<a.bottom&&a.bottom<=e.scrollY?r={direction:"up"}:l+e.innerHeight>a.top&&a.top>=e.scrollY+e.innerHeight&&(r={direction:"down"}),r&&(n.$eval(o.phiViewportLeaveEnd,{event:r}),n.$apply()),l=e.scrollY},angular.element(e).bind("scroll",n.scrollListener),i.on("$destroy",function(){angular.element(e).unbind("scroll",n.scrollListener)})}}}]),angular.module("phidias-angular").directive("phiViewportEnter",["$window","phiCoordinates","$timeout",function(e,t,n){return{restrict:"A",link:function(n,i,o){var l=e.scrollY;angular.element(e).bind("scroll",function(){var a=t.getBounds(i),r=null;l+e.innerHeight<a.top&&a.top<=e.scrollY+e.innerHeight?r={direction:"up"}:l>a.bottom&&a.bottom>=e.scrollY&&(r={direction:"down"}),r&&(n.$eval(o.phiViewportEnter,{event:r}),n.$apply()),l=e.scrollY})}}}]),angular.module("phidias-angular").directive("phiViewportEnterEnd",["$window","phiCoordinates","$timeout",function(e,t,n){return{restrict:"A",link:function(n,i,o){var l=e.scrollY;angular.element(e).bind("scroll",function(){var a=t.getBounds(i),r=null;l+e.innerHeight<a.bottom&&a.bottom<=e.scrollY+e.innerHeight?r={direction:"up"}:l>a.top&&a.top>=e.scrollY&&(r={direction:"down"}),r&&(n.$eval(o.phiViewportEnterEnd,{event:r}),n.$apply()),l=e.scrollY})}}}]),function(){"use strict";angular.module("phidias-angular").directive("srcIf",[function(){return{restrict:"A",scope:!1,compile:function(e,t){return function(e,t,n){t=void 0==t[0].tagName?t[0].nextElementSibling:t[0],n.$observe("srcIf",function(e){e?t.set("src",n.srcIf):t.removeAttribute("src")})}}}}])}(),angular.module("phidias-angular").directive("ngThumb",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1}};return{restrict:"A",template:"<canvas/>",link:function(e,n,i){function o(e){var t=new Image;t.onload=l,t.src=e.target.result}function l(){var e=a.width||this.width/this.height*a.height,t=a.height||this.height/this.width*a.width;r.attr({width:e,height:t}),r[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var a=e.$eval(i.ngThumb);if(t.isFile(a.file)&&t.isImage(a.file)){var r=n.find("canvas"),s=new FileReader;s.onload=o,s.readAsDataURL(a.file)}}}}}]),function(){"use strict";function e(){return{restrict:"E",scope:{ngModel:"=",controllerAssign:"=",onChange:"&",onDestroy:"&"},controller:t,controllerAs:"vm"}}function t(e,t,i,o){function l(n){if(void 0!==u.states[n]&&u.currentState!=n){c&&(c.$destroy(),c=null),c=e.$new(!0),c.phiBlock=u,t.removeClass("phi-block-state-"+u.currentState),t.addClass("phi-block-state-"+n),u.currentState=n,u.controller.currentState=n;var l=u.states[n];if(l.controller){var a=i(l.controller,{$scope:c});l.controllerAs&&(c[l.controllerAs]=a)}if(l.template){var r=o(l.template)(c);t.empty().append(r)}}}function a(){u.onChange()}function r(){u.onDestroy()}function s(e){u.isLoading=e,u.controller.isLoading=e}var c,d,u=this;u.ngModel=e.ngModel,u.onChange=e.onChange,u.onDestroy=e.onDestroy,u.states=[],u.currentState=null,u.go=l,u.isLoading=!1,u.setLoading=s,u.change=a,u.destroy=r,t.addClass("phi-block-type-"+u.ngModel.type),d=n(u.ngModel.type,u),u.states=d.states,u.menu=d.menu?d.menu:null,u.controller={states:Object.keys(u.states),menu:u.menu,currentState:u.currentState,go:l,isLoading:u.isLoading},void 0!=e.controllerAssign&&(e.controllerAssign=u.controller),"function"==typeof d.initialize?d.initialize():u.states.length&&u.go(Object.keys(u.states)[0])}function n(e,t){var n=e.split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}),i="phiBlock"+n.join("");try{var o=angular.element(document.body).injector().get(i);return o(t)}catch(l){return console.log("Block service "+i+" not found"),{states:[]}}}angular.module("phidias-angular").directive("phiBlock",e),t.$inject=["$scope","$element","$controller","$compile"]}(),function(){"use strict";function e(){return{restrict:"E",transclude:!0,template:'<button phi-button type="button" ng-transclude></button>',replace:!0}}angular.module("phidias-angular").directive("phiButton",e)}(),function(){"use strict";function e(e){function t(t,i){return i.type="checkbox",i.tabIndex=0,t.attr("role",i.type),function(t,i,o,l){function a(e){32===e.which&&(e.preventDefault(),r(e))}function r(e){i[0].hasAttribute("disabled")||t.$apply(function(){c=!c,l.$setViewValue(c,e&&e.type),l.$render()})}function s(){c=l.$viewValue,i.toggleClass(n,c)}var c=!1;e.link.pre(t,{on:angular.noop,0:{}},o,[l]),i.on("click",r).on("keypress",a),l.$render=s}}e=e[0];var n="phi-checked";return{restrict:"E",transclude:!0,require:"?ngModel",template:'<div class="phi-checkbox-box"></div><div ng-transclude class="phi-checkbox-label"></div>',compile:t}}angular.module("phidias-angular").directive("phiCheckbox",["inputDirective",e])}(),function(){"use strict";function e(){return{restrict:"E",scope:{src:"@","default":"@"},link:function(e,t,n){n.$observe("src",function(n){var i=[];n&&i.push("url('"+n+"')"),e["default"]&&i.push("url('"+e["default"]+"')"),i.length&&t.css("background-image",i.join())})}}}angular.module("phidias-angular").directive("phiCover",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{event:"=ngModel"},controller:t,controllerAs:"vm",bindToController:!0,templateUrl:"/components/elements/phi-event-editor/phi-event-editor.html"}}function t(){var e=this;e.defaultRepeat={interval:"1",every:"week"},e.minDate=null,e.toggleRepeat=function(t){void 0==t&&(t=!e.event.repeat),e.event.repeat=t?e.defaultRepeat:null},e.sanitize=function(){e.event.endDate<e.event.startDate&&(e.event.endDate=e.event.startDate),e.minDate=new Date,e.minDate.setDate(e.event.startDate.getDate()-1)},e.sanitize()}angular.module("phidias-angular").directive("phiEventEditor",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{repeat:"=ngModel"},controller:t,controllerAs:"vm",bindToController:!0,templateUrl:"/components/elements/phi-event-repeat/phi-event-repeat.html"}}function t(e){var t=this;t.checkedDays=[],t.summary="",e.$watch("vm.repeat",function(){if("object"==typeof t.repeat.on){t.checkedDays=[];for(var e=0;e<t.repeat.on.length;e++)t.checkedDays[parseInt(t.repeat.on[e])]=!0}},!0),t.sayDay=function(e){switch(e){case 1:return"lunes";case 2:return"martes";case 3:return"miércoles";case 4:return"jueves";case 5:return"viernes";case 6:return"sábado";case 7:return"domingo";default:return"???"}},t.toggleDay=function(e,n){"object"!=typeof t.repeat.on&&(t.repeat.on=[]),n?t.repeat.on.indexOf(e)==-1&&t.repeat.on.push(e):t.repeat.on.splice(t.repeat.on.indexOf(e),1)},t.getSummary=function(){if(!t.repeat.every)return"no se repite";var e="cada ";switch(t.repeat.interval>1&&(e+=t.repeat.interval+" "),t.repeat.every){case"day":e+=t.repeat.interval>1?"dias":"dia";break;case"week":e+=t.repeat.interval>1?"semanas":"semana";var n=[];if("object"==typeof t.repeat.on)for(var i=0;i<t.repeat.on.length;i++)n.push(t.sayDay(t.repeat.on[i]));n.length&&(e+=" los "),e+=n.length>2?" "+n.slice(0,n.length-2).join(", ")+", "+n.slice(n.length-2).join(" y "):" "+n.join(" y ");break;case"month":e+=t.repeat.interval>1?"meses":"mes",e+="weekday"==t.repeat.on?" el día de la semana":" el día del mes";break;case"year":e+=t.repeat.interval>1?"años":"año"}return e}}angular.module("phidias-angular").directive("phiEventRepeat",e),t.$inject=["$scope"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{control:"="},controller:t,controllerAs:"gallery",bindToController:!0,transclude:!0,replace:!0,template:'<div phi-modal class="phi-gallery-modal" phi-visible="{{gallery.isVisible}}" ng-click="gallery.isVisible = false"><div class="phi-gallery-modal-navigation"><a class="previous"ng-class="{disabled: !gallery.control.hasPrevious()}"ng-click="gallery.control.previous(); $event.stopPropagation();">anterior</a><span>{{gallery.control.activeIndex+1}} de {{gallery.control.length}}</span><a class="next"ng-class="{disabled: !gallery.control.hasNext()}"ng-click="gallery.control.next(); $event.stopPropagation();">siguiente</a></div><div class="phi-gallery-modal-contents" phi-switch="gallery.control" ng-transclude on-change="gallery.isVisible = true"></div></div>'}}function t(e){var t=this;t.isVisible=!1,t.control=t.control?t.control:{}}angular.module("phidias-angular").directive("phiGallery",e),t.$inject=["$scope"]}(),angular.module("phidias-angular").directive("phiInput",[function(){var e=1;return{restrict:"E",scope:{name:"@",type:"@",label:"@",placeholder:"@",ngModel:"=",ngModelOptions:"=",ngChange:"&",ngFocus:"&",ngBlur:"&",maxlength:"@"},template:'<div><label for="{{elementId}}" ng-bind="label"></label><input maxlength="{{maxlength}}" type="{{type||\'text\'}}" ng-show="!multiline" placeholder="{{placeholder}}" ng-focus="focus()" ng-blur="blur()" id="{{elementId}}" name="{{name}}" ng-model="ngModel" ng-disabled="state.disabled" ng-model-options="ngModelOptions||{}" /><textarea maxlength="{{maxlength}}" ng-show="multiline" placeholder="{{placeholder}}" ng-focus="focus()" ng-blur="blur()" id="{{elementId}}" name="{{name}}" ng-model="ngModel" ng-disabled="state.disabled" ng-trim="false" ng-model-options="ngModelOptions||{}"></textarea></div><hr />',link:function(t,n,i){t.elementId="phi-input-"+e++,t.floatinglabel="undefined"!=typeof i.floatinglabel&&"false"!==i.floatinglabel&&"0"!==i.floatinglabel,t.multiline="undefined"!=typeof i.multiline&&"false"!==i.multiline&&"0"!==i.multiline,t.state={focused:!1,empty:!0,disabled:"undefined"!=typeof i.disabled&&"false"!==i.disabled&&"0"!==i.disabled};var o=t.multiline?n.find("textarea"):n.find("input");for(var l in i)t.hasOwnProperty(l)||"$"==l.charAt(0)||o.attr(l,i[l]);n.toggleClass("phi-input-disabled",t.state.disabled),n.attr("tabindex",-1),n.on("focus",function(){var e=t.multiline?n.find("textarea"):n.find("input");e[0].focus()}),t.focus=function(){t.state.focused=!0,n.toggleClass("phi-input-focused",!0),t.ngFocus()},t.blur=function(){t.state.focused=!1,n.toggleClass("phi-input-focused",!1),t.ngBlur()},t.resizeTextarea=function(){if(t.multiline){var e=n.find("textarea");e.css("height","auto"),e.css("height",Math.max(e[0].scrollHeight,e[0].clientHeight)+"px")}},t.$watch("ngModel",function(e,i){t.state.empty=void 0==e||!e.length,n.toggleClass("phi-input-empty",t.state.empty),e!=i&&(t.resizeTextarea(),t.ngChange())})}}}]),function(){"use strict";function e(){return{restrict:"E",scope:{onSelect:"&"},controller:["$scope",function(e){this.select=function(t){e.onSelect(t)}}]}}function t(){return{restrict:"E",require:"^phiMenu",scope:{label:"@"},transclude:!0,template:'<a class="phi-submenu-label" ng-bind="label" tabindex="0" ng-click="toggle()"></a><div class="phi-submenu-contents" ng-transclude></div>',link:function(e,t,n,i){e.setExpanded=function(n){e.expanded=n,e.expanded?(t.attr("expanded","expanded"),t.find("div").find("a").attr("tabindex",0)):(t.removeAttr("expanded"),t.find("div").find("a").attr("tabindex",-1))},e.toggle=function(){e.setExpanded(!e.expanded)},e.setExpanded(!1);for(var o=t.find("a"),l=0;l<o.length;l++)if(void 0!==angular.element(o[l]).attr("active")){e.setExpanded(!0);break}}}}function n(){return{restrict:"EA",require:"^phiMenu",link:function(e,t,n,i){t.on("click",function(){i.select(t)})}}}angular.module("phidias-angular").directive("phiMenu",e).directive("phiSubmenu",t).directive("phiMenuItem",n)}(),function(){"use strict";function e(e){function t(){function t(t){var n=null;r.isLoading=!0,n=void 0!=t.id?e.put(s+"/"+t.id,t):e.post(s,t).then(function(e){r.destinations.push(o(e.data))}),n["finally"](function(){r.isLoading=!1})}function n(t){confirm("eliminar este destinatario?")&&e.remove(s+"/"+t.id).then(function(){r.destinations.splice(r.destinations.indexOf(t),1)})}function i(){e.get("types/post").then(function(t){r.types=t.data,e.get(s).then(function(e){r.destinations=e.data.map(o)})})}function o(e){l(e);var t=[];void 0==e.preferences&&(e.preferences=[]);for(var n=0;n<r.types.length;n++){var i=r.types[n],o=a(e.preferences,i.singular);o?t.push(l(o)):t.push({type:i.singular,isEnabled:!0})}return e.preferences=t,e}function l(e){return e.isEnabled="1"==e.isEnabled,e.hasSchedule=!!e.schedule,e.hasSchedule&&(e.scheduleDate=new Date(null,null,null,e.schedule.slice(0,2),e.schedule.slice(-2))),e}function a(e,t){if(void 0==e)return null;for(var n=0;n<e.length;n++){var i=e[n];if(i.type==t)return i}return null}var r=this,s="people/"+r.personId+"/notification/destinations";r.transports=[{name:"email",label:"e-Mail",image:e.host+"/icons/fa-envelope.png",allowEdit:!0,defaultText:"mi correo principal"},{name:"sms",label:"SMS",image:e.host+"/icons/fa-envelope.png",allowEdit:!0,defaultText:"mi teléfono principal"},{name:"gcm",label:"Android",image:e.host+"/icons/fa-envelope.png",defaultText:"app móvil"},{name:"apn",label:"Apple",image:e.host+"/icons/fa-envelope.png",defaultText:"app móvil"}],r.types=[],r.destinations=[],r.isLoading=!1,r.save=t,r.remove=n,r.scheduleHours=[];for(var c=5;c<=23;c++){var d=c>12?c-12:c,u=c>12?"pm":"am";r.scheduleHours.push({label:d+":00 "+u,value:c+"00"},{label:d+":30 "+u,value:c+"30"})}i()}return{restrict:"E",scope:{personId:"@",allowEdit:"="},templateUrl:"/components/elements/phi-notification-settings/phi-notification-settings.html",controller:t,controllerAs:"vm",bindToController:!0}}angular.module("phidias-angular").directive("phiNotificationSettings",e),e.$inject=["phiApi"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"/components/elements/phi-post/phi-post.html",controller:t,controllerAs:"vm",bindToController:!0}}function t(e,t){var n=this;n.post=n.ngModel,t.$watch("vm.ngModel",function(e,t){e!=t&&(n.post=e)})}angular.module("phidias-angular").directive("phiPost",e),t.$inject=["$sce","$scope"]}(),function(){function e(){return{restrict:"E",scope:{post:"=ngModel"},controller:t,controllerAs:"vm",bindToController:!0,templateUrl:"/components/elements/phi-post-editor/phi-post-editor.html"}}function t(e,t){function n(e){a.post.blocks||(a.post.blocks=[]);var t=e.block;t.type=e.type,t.order=a.post.blocks.length,a.post.blocks.push(t)}function i(t){t.id?e.put(a.post.url+"/blocks/"+t.id,t):e.post(a.post.url+"/blocks",{type:t.type,url:t.url,title:t.title,description:t.description,order:a.post.blocks.length}).then(function(e){t.id=e.data.id})}function o(t){t.id?e.remove(a.post.url+"/blocks/"+t.id).then(function(){a.post.blocks.splice(a.post.blocks.indexOf(t),1)}):a.post.blocks.splice(a.post.blocks.indexOf(t),1)}function l(){for(var t=[],n=0;n<a.post.blocks.length;n++)t.push(a.post.blocks[n].id);e.put(a.post.url+"/blocks/",t)}var a=this;a.addBlock=n,a.attachBlock=i,a.removeBlock=o,a.reorder=l,t.$watch("vm.post",function(e){e&&(a.insertable=[{type:"html",title:"texto HTML",icon:"fa-font",block:{collectionUrl:"/media/html",menu:[{state:"editor",title:"editar",icon:"fa-pencil"},{state:"delete",title:"eliminar",icon:"fa-trash-o"}]}},{type:"youtube",title:"Youtube",icon:"fa-youtube-play",block:{collectionUrl:a.post.url+"/blocks",menu:[{state:"editor",title:"editar",icon:"fa-pencil"},{state:"delete",title:"eliminar",icon:"fa-trash-o"}]}},{type:"files",title:"Archivos",icon:"fa-files-o",block:{collectionUrl:a.post.url+"/resources/files",menu:[{state:"editor",title:"editar",icon:"fa-pencil"},{state:"delete",title:"eliminar",icon:"fa-trash-o"}]}},{type:"form",title:"Formulario",icon:"fa-pencil-square-o",block:{collectionUrl:"/data/entities",menu:[{state:"editor",title:"editar",icon:"fa-pencil"},{state:"delete",title:"eliminar",icon:"fa-trash-o"}]}}])})}angular.module("phidias-angular").directive("phiPostEditor",e),t.$inject=["phiApi","$scope"]}(),function(){"use strict";function e(){return{restrict:"E",require:"?ngModel",transclude:!0,template:'<div id="{{vm.uniqueId}}" class="phi-select-face" ng-click="vm.expand()" ng-class="{\'phi-select-expanded\': vm.isExpanded}"><div ng-show="!vm.isExpanded" class="phi-select-value"></div><input ng-show="!!vm.isExpanded" type="text" ng-model="vm.query" tabindex="-1" size="2" /></div><phi-menu ng-transclude phi-texture="paper" phi-tooltip-for="{{vm.uniqueId}}" phi-visible="{{vm.isExpanded}}" phi-visible-animation="slide-bottom"></phi-menu>',scope:{onSearch:"&phiOnSearch"},controller:n,controllerAs:"vm",bindToController:!0,link:t}}function t(e,t,n,i){function l(e){e||(e="");for(var n=t.find("phi-option"),i=0;i<n.length;i++){var o=angular.element(n[i]);if(o.attr("value")==e)return o}return null}e.vm.uniqueId="phiSelect"+ ++o,t.data("phiSelectLinkId",e.vm.uniqueId),t.on("focus",e.vm.expand);var a=angular.element(t.find("div")[1]);e.vm.ngModel=i,i.$render=function(){var e=l(i.$viewValue);a.html(e?e.html():i.$viewValue)},e.$watch("vm.query",function(t,n){t!=n&&e.vm.onSearch({query:t})})}function n(e,t,n,i){function o(t){angular.element(t.target).inheritedData("phiSelectLinkId")!=n.data("phiSelectLinkId")&&e.$apply(l.collapse)}var l=this;l.query=null,l.setValue=function(e){l.collapse(),l.ngModel.$setViewValue(e),l.ngModel.$render()},l.isExpanded=!1,l.expand=function(){l.isExpanded||(l.isExpanded=!0,i(function(){n.find("input")[0].focus()},0),t.bind("click",o),l.onSearch())},l.collapse=function(){l.isExpanded=!1,t.unbind("click",o)},l.toggle=function(){l.isExpanded?l.collapse():l.expand()},l.attachOptionElement=function(e){e.on("click",function(){l.setValue(e.attr("value"))})}}function i(){return{restrict:"E",require:"^phiSelect",template:"<a ng-transclude></a>",transclude:!0,link:function(e,t,n,i){i.attachOptionElement(t)}}}angular.module("phidias-angular").directive("phiSelect",e).directive("phiOption",i);var o=0;n.$inject=["$scope","$document","$element","$timeout"]}(),function(){"use strict";function e(){function e(e){n.host=e}function t(e,t,i){function o(e){g.host=e}function l(e){e?g.token=e:g.token=null}function a(e,t,n){return p("get",e,t,n)}function r(e,t,n){return p("post",e,t,n)}function s(e,t,n){return p("put",e,t,n)}function c(e,t,n){return p("patch",e,t,n)}function d(e,t,n){return p("options",e,t,n)}function u(e,t,n){return p("delete",e,t,n)}function p(n,i,o,l){var a={method:n,url:g.host?g.host+"/"+i:i,data:o};if(g.token&&angular.extend(a,{headers:{Authorization:"Bearer "+g.token}}),angular.extend(a,l),"get"==n&&(a.url+="?"+h(a.data),a.data=null,g.cacheIsEnabled)){var r=g.cache(a),s=r.get();if(s){var c=t.defer();return c.resolve(s),c.promise}return e(a).then(function(e){return r.store(e),e})}return e(a)}function h(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var o=t?t+"["+i+"]":i,l=e[i];if(null==l)continue;"object"==typeof l?n.push(h(l,o)):("number"==typeof l||l.length>0)&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(l))}return n.join("&")}var g={host:n.host,setHost:o,token:null,setToken:l,get:a,post:r,put:s,patch:c,options:d,remove:u,"delete":u,cacheIsEnabled:!0,maxCacheTime:20,setCaching:function(e){g.cacheIsEnabled=e}},f={},m={};return g.cache=function(e){function t(e){var t=e.url.replace(g.host,"").replace(/[\/?]+$/,"");return"api-cache:"+t}function n(t,n){var i=e.url.replace(g.host,"").replace(/[\/?]+$/,"");if(i.indexOf("threads/all")>0)for(var o in f)return void f[o](t,n)}function o(t){var n=e.url.replace(g.host,"").replace(/[\/?]+$/,"");if(!m[n])return t.payload;var i=m[n];return t.payload=i(t.payload,new Date(t.timestamp)),t.payload}e=angular.extend({maxCacheTime:g.maxCacheTime},e);var l=i.session,a={get:function(){var n=l.get(t(e));if(n){var i=(new Date-new Date(n.timestamp))/1e3;if(i<e.maxCacheTime){var a=o(n);return a.headers=function(e){return void 0==e?a._headers:a._headers[e]},a}}},store:function(i){i._headers=i.headers();var o=t(e),r=l.get(o);return n(i,r?r.payload:null),l.set(o,{payload:i,timestamp:new Date}),a},clear:function(){return l.clear(t(e)),a},patch:function(n){var i=t(e),o=l.get(i);return o&&(n=angular.extend(o.payload,n)),a.store(n),n},fetch:function(n){var i=t(e),o=l.get(i);return o?(void 0==n&&(n={}),angular.extend(n,o.payload)):n},watch:function(t){return f[e.url]=t,a},filter:function(t){return m[e.url]=t,a}};return a},g}var n=this;n.host=null,n.setHost=e,n.$get=t,t.$inject=["$http","$q","phiStorage"]}angular.module("phidias-angular").provider("phiApi",e)}(),function(){"use strict";function e(){function e(e,t,n,i,o,l,a,r){function s(){var e={};angular.merge(e,k()),angular.merge(e,i.local.get("phiApp")),d(e)}function c(e,t){return void 0==t&&(t="http://phidias.io/"),n.get(t+"/code/"+e).then(function(e){d({title:e.data.title,logo:e.data.logo,endpoint:e.data.url})})}function d(e){e&&(x.title=e.title||x.title,x.logo=e.logo||x.logo,x.token=e.token||x.token,x.googleClientId=e.googleClientId||x.googleClientId,e.endpoint&&(x.isLoaded=!0,x.endpoint=e.endpoint,o.setHost(x.endpoint)),x.token&&x.setToken(x.token),u())}function u(){i.local.set("phiApp",{title:x.title,endpoint:x.endpoint,logo:x.logo,token:x.token,googleClientId:x.googleClientId})}function p(){i.clear("phiApp"),d(k())}function h(t){x.token=t,x.user=l.decode(t),x.isAuthenticated=!0,o.setToken(t),v(),u(),e.$broadcast("phiAppLogin")}function g(){x.user&&x.user.id&&window.device&&window.device.uuid&&o["delete"]("people/"+x.user.id+"/devices/"+window.device.uuid),x.token=null,x.user=null,x.isAuthenticated=!1,o.setToken(!1),u(),e.$broadcast("phiAppLogout")}function f(e,t){var n=a.defer();return o.post("oauth/token","grant_type=client_credentials",{headers:{Authorization:"Basic "+btoa(e+":"+t),"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){x.setToken(e.data.access_token),n.resolve(x.user)},function(e){n.reject(e)}),n.promise}function m(){var e=a.defer();return b().then(function(t){o.post("oauth/google",{code:t}).then(function(t){x.setToken(t.data.access_token),e.resolve(x.user)},function(t){e.reject(t)})}),e.promise}function v(){if("undefined"!=typeof PushNotification){var t=PushNotification.init({android:{senderID:x.googleClientId},ios:{alert:"true",badge:"true",sound:"true"},windows:{}});t.on("registration",function(e){window.device&&window.device.platform&&o.post("people/"+x.user.id+"/devices/",{token:e.registrationId,platform:window.device.platform,model:window.device.model,uuid:window.device.uuid})}),t.on("notification",function(t){e.$broadcast("phiAppNotification",t)}),t.on("error",function(e){alert(e.message)})}}function b(){var e=a.defer(),t="https://accounts.google.com/o/oauth2/v2/auth?"+r({redirect_uri:"http://www.phidias.co/googlesignin.html",client_id:x.googleClientId+".apps.googleusercontent.com",scope:"email",response_type:"code",prompt:"select_account"}),n=window.open(t,"_blank","location=no,toolbar=no"),i=function(t){"success"==t.data.status?e.resolve(t.data.code):e.reject(t.data.error),window.removeEventListener("message",i)};return window.addEventListener("message",i),n.addEventListener("loadstart",function(e){var t=e.url,i=new RegExp(/\?code=(.+)$/).exec(t),o=new RegExp(/\?error=(.+)$/).exec(t),l={};i?(l.status="success",l.code=i[1]):o&&(l.status="error",l.error=o[1]),(i||o)&&(window.postMessage(l,"*"),n.close())}),e.promise}function k(){for(var e={},n=t.find("meta"),i=0;i<n.length;i++)"phi-endpoint"==n[i].name&&(e.endpoint=n[i].content),"phi-title"==n[i].name&&(e.title=n[i].content),"phi-logo"==n[i].name&&(e.logo=n[i].content),"phi-google-client-id"==n[i].name&&(e.googleClientId=n[i].content);return e}function y(){var e=this;e.isLoading=!1,e.error=null,e.credentials={username:null,password:null},e.login=function(){e.isLoading=!0,x.authenticate(e.credentials.username,e.credentials.password).then(function(e){x.hideLogin()},function(t){switch(t.data.error){case"Phidias\\OAuth\\Exception\\UserNotFound":e.error="usuario no encontrado";break;case"Phidias\\OAuth\\Exception\\WrongPassword":e.error="contrasena incorrecta";break;case"Phidias\\OAuth\\Exception\\UserNotActive":e.error="este usuario aun no esta activado";break;default:e.error="ha ocurrido un error iniciando la sesion"}})["finally"](function(){e.isLoading=!1})}}function w(e,t){function n(){e.$watch(function(){return l.account},function(e,t){for(var n in e)e[n]!=t[n]&&delete l.errors[n]})}function i(){l.account.payload=t,l.isLoading=!0,o.post("accounts",l.account).then(function(e){l.verificationEmail=e.data.email},function(e){l.errors=e.data.data})["finally"](function(){l.isLoading=!1})}var l=this;l.isLoading=!1,l.account={},l.errors={},l.verificationEmail=null,l.signup=i,n()}var x={isLoaded:!1,title:null,endpoint:null,logo:null,loadCode:c,clear:p,googleClientId:null,isAuthenticated:!1,token:null,user:null,setToken:h,logout:g,authenticate:f,googleSignIn:m,previousState:null,loginShown:!1,showLogin:function(){x.loginShown=!0},hideLogin:function(){x.loginShown=!1},loginController:y,signupController:w};return s(),w.$inject=["$scope","$stateParams"],x}var t=this;t.$get=e,e.$inject=["$rootScope","$document","$http","phiStorage","phiApi","phiJwt","$q","$httpParamSerializer"]}angular.module("phidias-angular").provider("phiApp",e)}(),function(){"use strict";function e(e){return{getBounds:function(t,n){e.cancel(t.clearBoundsTimeout),t.clearBoundsTimeout=e(function(){t.data("phi-coordinates-bounds",null)},500);var i=t.data("phi-coordinates-bounds");if(!i){var o=t[0];n=n||o.offsetParent||document.body,n=n[0]||n;var l=o.getBoundingClientRect(),a=n.getBoundingClientRect();i={left:l.left-a.left,top:l.top-a.top,width:l.width,height:l.height,bottom:l.top-a.top+l.height},t.data("phi-coordinates-bounds",i)}return i},parseAlignmentString:function(e){if(void 0==e)return null;
var t=null,n=null;return e.indexOf("center")!=-1&&(t="center",n="center"),e.indexOf("top")!=-1&&(t="top"),e.indexOf("bottom")!=-1&&(t="bottom"),e.indexOf("left")!=-1&&(n="left"),e.indexOf("right")!=-1&&(n="right"),t&&n?{vertical:t,horizontal:n}:null}}}angular.module("phidias-angular").service("phiCoordinates",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){function e(){function e(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT must have 3 parts");var n=i(t[1]);if(!n)throw new Error("Cannot decode the token");return JSON.parse(n)}function t(e){var t=n(e);return!!t&&!(t.valueOf()>(new Date).valueOf())}function n(t){var n;if(n=e(t),!n.exp)return null;var i=new Date(0);return i.setUTCSeconds(n.exp),i}function i(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return decodeURIComponent(escape(window.atob(t)))}var o={decode:e,isExpired:t,getExpirationDate:n};return o}var t=this;t.$get=e}angular.module("phidias-angular").provider("phiJwt",e)}(),function(){"use strict";function e(){return{session:t(window.sessionStorage),local:t(window.localStorage)}}function t(e){return{set:function(t,n){e[t]=angular.toJson(n)},get:function(t,n){return void 0===e[t]?n:angular.fromJson(e[t])},clear:function(t){return void 0!==t?e.removeItem(t):e.clear()}}}angular.module("phidias-angular").factory("phiStorage",e)}(),function(){"use strict";function e(e){function t(e,t,n){if("scale"==n.phiVisibleAnimation){var i=t[0];n.$observe("phiVisible",function(e){if("true"==e){i.style.height="auto";var t=getComputedStyle(i).height;i.style.height=0,i.offsetHeight,i.style.height=t,i.addEventListener("transitionend",function n(e){"height"==e.propertyName&&(i.removeEventListener("transitionend",n,!1),i.style.height="auto")},!1)}else i.style.height=getComputedStyle(i).height,i.offsetHeight,i.style.height="0"})}}return{restrict:"A",link:t}}angular.module("phidias-angular").directive("phiVisibleAnimation",e),e.$inject=["phiCoordinates"]}(),function(){"use strict";function e(){return{restrict:"E",template:'<div><img ng-src="{{src}}" /></div>',scope:{src:"@"}}}angular.module("phidias-angular").directive("phiAvatar",e)}(),function(){"use strict";function e(e){function t(){function t(){e.get("types/post").then(function(t){u.types=t.data,e.get(p).then(function(e){u.settings=e.data.map(i)})})}function n(e){switch(e){case"mobile":return"aplicación móvil";default:return e}}function i(e){return e.hasSchedule=!!e.schedule,e.hasSchedule&&(e.scheduleDate=new Date(null,null,null,e.schedule.slice(0,2),e.schedule.slice(-2))),o(e),e}function o(e){if(void 0!=e.type)return e;for(var t=[],n=0;n<u.types.length;n++){var o=u.types[n],a=l(e.types,o.singular);a?t.push(i(a)):t.push({type:o.singular,isEnabled:!0})}return e.types=t,e}function l(e,t){if(void 0==e)return null;for(var n=0;n<e.length;n++){var i=e[n];if(i.type==t)return i}return null}function a(e){var t=("00"+String(e.getHours())).slice(-2),n=("00"+String(e.getMinutes())).slice(-2);return t+n}function r(){e.post(p,u.settings).then(function(e){t()})}function s(e,t){e.scheduleDate||(e.scheduleDate=new Date(null,null,null,17,0)),e.schedule=t?u.toHour(e.scheduleDate):null}function c(e){var t=[];if(!e.isEnabled)return t.push("desactivado"),t;if(e.hasSchedule){var n=e.scheduleDate.getHours(),i=("00"+String(e.scheduleDate.getMinutes())).slice(-2),o=n>=12?"pm":"am";n>=12&&(n-=12),0==n&&(n=12),t.push("se envia un consolidado a las "+n+":"+i+" "+o)}else t.push("activado");if(e.types){for(var l=[],a=0;a<e.types.length;a++){var r=e.types[a],s=d(r.type);r.isEnabled?r.hasSchedule&&t.push((s.gender?"los ":"las ")+s.plural+" se consolidan"):l.push(s.plural)}l.length>0&&t.push("excepto "+l.join(", "))}return t}function d(e){for(var t=0;t<u.types.length;t++)if(u.types[t].singular==e)return u.types[t];return null}var u=this,p="people/"+u.personId+"/notifications/settings";u.types=[],u.settings={},u.getTransportName=n,u.toHour=a,u.toggleScheduling=s,u.describeSetting=c,u.save=r,t()}return{restrict:"E",scope:{personId:"@"},templateUrl:"/components/elements/phi-notification-settings/phi-notification-settings.html",controller:t,controllerAs:"vm",bindToController:!0}}angular.module("phidias-angular").directive("phiNotificationSettingsOld",e),e.$inject=["phiApi"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{src:"@"},controller:t,controllerAs:"vm",bindToController:!0,template:'<ul><li ng-repeat="item in vm.files" class="phi-api-resource-files-file" ng-class="{selected: selected.url == item.url}" ng-click="select(item)"><a class="thumbnail" target="_blank" href="{{item.url}}"><img ng-if="!!item.thumbnail" ng-src="{{item.thumbnail}}" /></a><a class="details" target="_blank" href="{{item.url}}"><h3 ng-bind="item.title"></h3><p>{{item.size|bytes}} - {{item.name}}</p></a></li></ul>'}}function t(e){var t=this;t.files=[],e.get(t.src).then(function(e){t.files=e.data})}angular.module("phidias-angular").directive("phiApiResourceFiles",e),t.$inject=["phiApi"]}(),function(){"use strict";function e(e,t){return function(n){function i(){n.ngModel.url?e.get(n.ngModel.url).then(function(e){n.form=e.data,n.go("default")}):e.post(n.ngModel.collectionUrl).then(function(e){n.ngModel.url=e.headers("location"),n.form=e.data,n.form.fields=[],n.change(),n.go("editor")})}function o(){var i="people/"+t.user.id+"/data/entities/"+n.form.id+"/records",o=this;o.currentRecord=null,o.records=[],e.get(i).then(function(e){o.records=e.data}),o.saveCurrentRecord=function(){i&&e.post(i,o.currentRecord).then(function(e){o.records=[e.data],o.currentRecord={}})}}function l(t,i){function o(){var e={type:"text",order:n.form.fields.length};n.form.fields.push(e)}function l(e){confirm("Deseas eliminar este campo ?")&&n.form.fields.splice(n.form.fields.indexOf(e),1)}function a(){e.put(n.ngModel.url,n.form)}function r(){for(var e=1;e<=n.form.fields.length;e++)n.form.fields[e-1].order=e}var s=this;s.addField=o,s.removeField=l,s.save=a,s.reorder=r;var c=null;t.$watch("phiBlock.form.fields",function(e,t){e!=t&&(i.cancel(c),c=i(s.save,1e3))},!0)}function a(){function t(){e["delete"](n.ngModel.url).then(function(){n.destroy()})}function i(){n.go("default")}var o=this;o.confirm=t,o.cancel=i}var r='<div class="phi-form-editor-field-preview" ng-switch="field.type"><div ng-switch-when="text"><label ng-bind="field.title"></label><input ng-model="vm.currentRecord[field.name]" type="text" /></div><div ng-switch-when="textarea"><label ng-bind="field.title"></label><textarea ng-model="vm.currentRecord[field.name]"></textarea></div><div ng-switch-when="select"><label ng-bind="field.title"></label><select ng-model="vm.currentRecord[field.name]"><option value="">---</option><option ng-repeat="line in field.options|lines track by $index" value="{{line}}">{{line}}</option></select></div><div ng-switch-when="checkbox"><phi-checkbox ng-model="vm.currentRecord[field.name]"> {{field.title}}</phi-checkbox></div><p class="description" ng-bind="field.description"></p></div>',s='<form class="phi-form-editor"><fieldset class="description"><phi-input multiline ng-model="phiBlock.form.description" label="descripci&oacute;n" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 920, \'blur\': 0 } }" ng-change="vm.save()"></phi-input></fieldset><fieldset class="fields" sv-root sv-part="phiBlock.form.fields" sv-on-sort="vm.reorder()"><div ng-repeat="field in phiBlock.form.fields" sv-element class="phi-form-editor-field"><div class="phi-form-editor-field-toolbar" sv-handle><a phi-icon="fa-times" ng-click="vm.removeField(field)" href="">&nbsp;</a></div><div class="phi-form-editor-field-controls"><phi-select label="tipo" ng-model="field.type"><phi-option value="text">texto</phi-option><phi-option value="textarea">textarea</phi-option><phi-option value="select">lista</phi-option><phi-option value="checkbox">checkbox</phi-option></phi-select><phi-input label="titulo" ng-model="field.title"></phi-input><phi-input multiline label="descripci&oacute;n" ng-model="field.description"></phi-input><div ng-show="field.type == \'select\'"><phi-input multiline label="opciones" ng-model="field.options"></phi-input><p class="notice">Escribe una opci&oacute;n por l&iacute;nea</p></div></div>'+r+'</div><div class="phi-form-editor-field-new" phi-icon-left="fa-plus" ng-click="vm.addField()">Agregar campo</div></fieldset></form>';return l.$inject=["$scope","$timeout"],{initialize:i,menu:[{label:"editar",icon:"fa-pencil",state:"editor"},{label:"eliminar",icon:"fa-times",state:"delete"}],states:{"default":{controller:o,controllerAs:"vm",template:'<div><form ng-if="!vm.records.length"><p ng-bind="phiBlock.form.description"></p><fieldset><div ng-repeat="field in phiBlock.form.fields">'+r+'</div></fieldset><footer><phi-button ng-click="vm.saveCurrentRecord()">Guardar</phi-button></footer></form><div ng-if="!!vm.records.length"><fieldset ng-repeat="record in vm.records"><div ng-repeat="field in phiBlock.form.fields"><strong ng-bind="field.title"></strong>: <span ng-if="field.type != \'checkbox\'" ng-bind="record.values[field.name]"></span><span ng-if="field.type == \'checkbox\'" ng-bind="record.values[field.name] == 1 ? \'si\' : \'no\'"></span></div></fieldset></div></div>'},editor:{controller:l,controllerAs:"vm",template:s},"delete":{controller:a,controllerAs:"vm",template:'<h1>Eliminar este formulario ?</h1><phi-button class="danger" ng-click="vm.confirm()">Eliminar</phi-button><phi-button class="cancel" ng-click="vm.cancel()">Cancelar</phi-button>'}}}}}angular.module("phidias-angular").factory("phiBlockForm",e),e.$inject=["phiApi","phiApp"]}(),function(){"use strict";function e(e){return function(e){function t(){return e.ngModel.url?void e.go("default"):void e.go("editor")}function n(){if(!e.ngModel.url){var t=Math.floor(1e4*Math.random()+1);e.ngModel.url=e.ngModel.collectionUrl+"/block"+t,e.change()}}return{initialize:t,menu:[{label:"editar",icon:"fa-pencil",state:"editor"},{label:"eliminar",icon:"fa-times",state:"delete"}],states:{"default":{template:'<phi-api-resource-files src="{{phiBlock.ngModel.url}}"></phi-api-resource-files>'},editor:{controller:n,template:'<phi-api-resource-files-editor src="{{phiBlock.ngModel.url}}"></phi-api-resource-files-editor>'},"delete":{template:'<form><h1>Eliminar esta carpeta ?</h1><footer><phi-button class="danger" ng-click="phiBlock.destroy()">eliminar</phi-button><phi-button class="cancel" ng-click="phiBlock.go(\'default\')">cancelar</phi-button></footer></form>'}}}}}angular.module("phidias-angular").factory("phiBlockFiles",e),e.$inject=["phiApi"]}(),function(){"use strict";function e(e){return function(t){function n(){return t.ngModel.url?void t.go("default"):void t.go("editor")}function i(){var n=this;n.images=[],n.control={},e.get(t.ngModel.url+"/files").then(function(e){n.images=e.data})}function o(){if(!t.ngModel.url){var e=Math.floor(1e4*Math.random()+1);t.ngModel.url=t.ngModel.collectionUrl+"/block"+e,t.change()}}return{initialize:n,menu:[{label:"editar",icon:"fa-pencil",state:"editor"},{label:"eliminar",icon:"fa-times",state:"delete"}],states:{"default":{controller:i,controllerAs:"vm",template:'<div><ul class="phi-gallery-thumbnails"><li ng-repeat="image in vm.images" ng-click="vm.control.select($index)"><img ng-src="{{image.thumbnail}}" alt="{{image.name}}" /></li></ul><phi-gallery control="vm.control"><div ng-repeat="image in vm.images"><img ng-src="{{image.url}}" alt="{{image.name}}" /></div></phi-gallery></div>'},editor:{controller:o,template:'<phi-api-resource-files-editor src="{{phiBlock.ngModel.url}}"></phi-api-resource-files-editor>'},"delete":{template:'<form><h1>Eliminar esta galería ?</h1><footer><phi-button class="danger" ng-click="phiBlock.destroy()">eliminar</phi-button><phi-button class="cancel" ng-click="phiBlock.go(\'default\')">cancelar</phi-button></footer></form>'}}}}}angular.module("phidias-angular").factory("phiBlockGallery",e),e.$inject=["phiApi"]}(),function(){"use strict";function e(e){return function(t){function n(){return t.ngModel.url?void t.go("default"):t.ngModel.collectionUrl?void e.post(t.ngModel.collectionUrl).then(function(e){t.ngModel.url=e.headers("location"),t.change(),t.go("editor")}):void t.go("error")}function i(n){var i=this;e.get(t.ngModel.url).then(function(e){i.body=n.trustAsHtml(e.data.body)})}function o(n,i){function o(n){e.put(t.ngModel.url,{body:n})}var l=this;e.get(t.ngModel.url).then(function(e){l.body=i.trustAsHtml(e.data.body),n.$watch("vm.body",function(e,t){e!=t&&void 0!=t&&void 0!=e&&o(e)})})}function l(){function n(){e["delete"](t.ngModel.url).then(function(){t.destroy()})}function i(){t.go("default")}var o=this;o.confirm=n,o.cancel=i}return i.$inject=["$sce"],o.$inject=["$scope","$sce"],{initialize:n,menu:[{label:"editar",icon:"fa-pencil",state:"editor"},{label:"eliminar",icon:"fa-times",state:"delete"}],states:{"default":{controller:i,controllerAs:"vm",template:'<div ng-bind-html="vm.body"></div>'},editor:{controller:o,controllerAs:"vm",template:'<text-angular ng-model="vm.body" ng-model-options="{default: 920, blur: 0}"></text-angular>'},"delete":{controller:l,controllerAs:"vm",template:'<h1>Eliminar este texto ?</h1><phi-button class="danger" ng-click="vm.confirm()">Eliminar</phi-button><phi-button class="cancel" ng-click="vm.cancel()">Cancelar</phi-button>'},error:{template:"<h1>error!</h1>"}}}}}angular.module("phidias-angular").factory("phiBlockHtml",e),e.$inject=["phiApi"]}(),function(){"use strict";function e(e){return function(e){function t(){return e.ngModel.url?void e.go("default"):void e.go("editor")}function n(){e.ngModel.url&&(e.ngModel.videoId=l(e.ngModel.url),e.ngModel.isInvalid=!e.ngModel.videoId,e.ngModel.thumbnail=e.ngModel.videoId?"https://img.youtube.com/vi/"+e.ngModel.videoId+"/0.jpg":null)}function i(t){function n(){e.change(),e.go("default")}function i(){e.ngModel.videoId?e.go("default"):e.destroy()}var o=this;o.save=n,o.cancel=i,t.$watch("phiBlock.ngModel.url",function(t,n){t!=n&&(e.ngModel.videoId=l(t),e.ngModel.isInvalid=!!t&&!e.ngModel.videoId,e.ngModel.thumbnail=e.ngModel.videoId?"https://img.youtube.com/vi/"+e.ngModel.videoId+"/0.jpg":null)})}function o(){function t(){e.destroy()}function n(){e.go("default")}var i=this;i.confirm=t,i.cancel=n}function l(e){if(!e.trim().length)return null;var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,n=e.match(t);return n&&11==n[2].length?n[2]:null}return i.$inject=["$scope"],{initialize:t,menu:[{label:"editar",icon:"fa-pencil",state:"editor"},{label:"eliminar",icon:"fa-times",state:"delete"}],states:{"default":{controller:n,controllerAs:"vm",template:'<div><p ng-show="!phiBlock.ngModel.videoId">El v&iacute;deo no es v&aacute;lido</p><p ng-show="!!phiBlock.ngModel.videoId" ng-bind="phiBlock.ngModel.title"></p><iframe ng-if="!!phiBlock.ngModel.videoId" width="100%" height="420" ng-src="{{\'https://www.youtube.com/embed/\' + phiBlock.ngModel.videoId | trustAsResourceUrl}}" frameborder="0" allowfullscreen></iframe></div>'},editor:{controller:i,controllerAs:"vm",template:'<form><fieldset><phi-input ng-model="phiBlock.ngModel.url" label="URL de youtube"></phi-input><p ng-show="!!phiBlock.ngModel.isInvalid">Debes ingresar una direcci&oacute;n v&aacute;lida de YouTube</p><div ng-show="!!phiBlock.ngModel.videoId" class="description"><phi-input ng-model="phiBlock.ngModel.title" label="titulo"></phi-input><phi-input multiline ng-model="phiBlock.ngModel.description" label="descripci&oacute;n"></phi-input><img ng-if="!!phiBlock.ngModel.thumbnail" ng-src="{{phiBlock.ngModel.thumbnail}}" /></div><footer style="margin-top: 16px"><phi-button ng-show="!!phiBlock.ngModel.videoId" ng-click="vm.save()">aceptar</phi-button><phi-button ng-click="vm.cancel()" class="cancel">cancelar</phi-button></footer></fieldset></form>'},"delete":{controller:o,controllerAs:"vm",template:'<form><h1>Eliminar este video ?</h1><footer><phi-button class="danger" ng-click="vm.confirm()">eliminar</phi-button><phi-button class="cancel" ng-click="vm.cancel()">cancelar</phi-button></footer></form>'},error:{template:"<h1>error!</h1>"}}}}}angular.module("phidias-angular").factory("phiBlockYoutube",e),e.$inject=["phiApi"]}(),function(){"use strict";function e(e,t,n){return function(i){function o(){return i.ngModel.url?void i.go("default"):void i.go("error")}function l(){var o=this;t.get(i.ngModel.url,{headers:{Authorization:"Bearer "+e.token}}).then(function(e){o.body=n.trustAsHtml(e.data)},function(){i.go("error")})}return{initialize:o,states:{"default":{controller:l,controllerAs:"vm",template:'<div ng-bind-html="vm.body"></div>'},error:{template:"<h1>Error cargando datos adjuntos</h1>"}}}}}angular.module("phidias-angular").factory("phiBlockV3",e),e.$inject=["phiApi","$http","$sce"]}(),function(){"use strict";function e(e,t){function n(n,i,o){n.selected=n.ngModel,n.items=[],n.uploader=null,n.reload=function(){return e.get(n.src).then(function(e){n.items=e.data})},n["delete"]=function(t,i){i.stopPropagation(),confirm("Eliminar este archivo?")&&e["delete"](t.endpoint+"/"+t.path).then(function(){n.items.splice(n.items.indexOf(t),1),n.onChange({items:n.items})})},n.select=function(e){o.onSelect&&(n.selected=e,n.onSelect({item:e}))},n.change=function(t){e.put(t.endpoint+"/"+t.path,t)},o.$observe("src",function(i){var o=e.host?e.host+"/"+n.src:n.src;n.uploader=new t({url:o,headers:{Authorization:"Bearer "+e.token}}),n.uploader.onAfterAddingAll=function(e){n.uploader.uploadAll()},n.uploader.onCompleteAll=function(){n.uploader.clearQueue(),n.reload().then(function(){n.onChange({items:n.items})})},n.reload()}),n.clickDropZone=function(){for(var e=i.find("input"),t=0;t<e.length;t++)if("file"==e[t].type){e[t].click();break}}}return{restrict:"E",scope:{src:"@",onSelect:"&",onChange:"&"},template:'<div><ul><li ng-repeat="item in items" class="phi-api-resource-files-file" ng-class="{selected: selected.url == item.url}" ng-click="select(item)"><a class="thumbnail" target="_blank" href="{{item.url}}"><img ng-if="!!item.thumbnail" ng-src="{{item.thumbnail}}" /></a><div class="details"><phi-input ng-model="item.title" ng-change="change(item)" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1000, \'blur\': 0 } }"></phi-input><p>{{item.size|bytes}} - {{item.name}}</p></div><a class="phi-api-resource-files-file-delete" ng-click="delete(item, $event)" phi-icon="fa-trash-o"></a></li></ul><div ng-if="uploader"><ul><li ng-repeat="item in uploader.queue" class="phi-api-resource-files-file"><div class="thumbnail"><div ng-if="item.file.type.substring(0,5) == \'image\'" ng-thumb="{file: item._file, height: 100}"></div></div><div class="details"><h3 ng-bind="item.file.name"></h3></div><progress max="100" value="{{item.progress}}"></progress><a class="phi-api-resource-files-file-delete" ng-click="item.remove()" phi-icon="fa-times"></a></li></ul><div class="phi-api-filesystem-dropzone" nv-file-over uploader="uploader" ng-click="clickDropZone()"><div nv-file-drop uploader="uploader">Arrastra archivos aqu&iacute; o haz click</div></div><input class="file-input" type="file" nv-file-select uploader="uploader" multiple /></div></div>',link:n}}angular.module("phidias-angular").directive("phiApiResourceFilesEditor",e),e.$inject=["phiApi","FileUploader"]}(),angular.module("phidias-angular").run(["$templateCache",function(e){e.put("/components/elements/phi-event-editor/phi-event-editor.html",'<div class="bootstrap">\n    <div class="form-inline date-range">\n        <div class="form-group">\n            <input bs-datepicker autoclose="true" type="text" name="startDate" ng-model="vm.event.startDate" class="form-control" size="10" placeholder="fecha inicial" ng-change="vm.sanitize()" />\n            <input bs-timepicker autoclose="false" type="text" name="startTime" ng-model="vm.event.startDate" class="form-control" size="8" placeholder="hora" ng-show="!vm.event.allDay" />\n        </div>\n        a\n        <div class="form-group">\n            <input bs-datepicker autoclose="true" type="text" name="endDate" ng-model="vm.event.endDate" class="form-control" size="10" placeholder="fecha final" data-min-date="{{vm.minDate}}" ng-change="vm.sanitize()" />\n            <input bs-timepicker autoclose="false" type="text" name="endTime" ng-model="vm.event.endDate" class="form-control" size="8" placeholder="hora" ng-show="!vm.event.allDay" />\n        </div>\n    </div>\n    <div class="form-inline date-options">\n        <div class="form-group">\n            <input type="checkbox" id="allDayChbox" ng-model="vm.event.allDay" />\n            <label for="allDayChbox">Todo el dia</label>\n        </div>\n        <div class="form-group">\n            <input type="checkbox" id="repeatsChbox" ng-checked="!!vm.event.repeat" ng-click="vm.event.repeat = !!vm.event.repeat ? null : vm.defaultRepeat" />\n            <label for="repeatsChbox">Repetir ...</label>\n        </div>\n    </div>\n    <div class="repeat" ng-if="!!vm.event.repeat">\n        <phi-event-repeat ng-model="vm.event.repeat"></phi-event-repeat>\n    </div>\n</div>'),e.put("/components/elements/phi-event-repeat/phi-event-repeat.html",'<div>\n\n    <div class="every">\n        <label>se repite</label>\n        <select ng-model="vm.repeat.every">\n            <option value="day">Cada día</option>\n            <option value="week">Cada semana</option>\n            <option value="month">Cada mes</option>\n            <option value="year">Cada año</option>\n        </select>\n    </div>\n\n    <div ng-show="vm.repeat.every" class="interval">\n        <label>Repetir cada</label>\n        <select ng-model="vm.repeat.interval">\n            <option value="1">1</option>\n            <option value="2">2</option>\n            <option value="3">3</option>\n            <option value="4">4</option>\n            <option value="5">5</option>\n            <option value="6">6</option>\n            <option value="7">7</option>\n            <option value="8">8</option>\n            <option value="9">9</option>\n            <option value="10">10</option>\n            <option value="11">11</option>\n            <option value="12">12</option>\n            <option value="13">13</option>\n            <option value="14">14</option>\n            <option value="15">15</option>\n            <option value="16">16</option>\n            <option value="17">17</option>\n            <option value="18">18</option>\n            <option value="19">19</option>\n            <option value="20">20</option>\n            <option value="21">21</option>\n            <option value="22">22</option>\n            <option value="23">23</option>\n            <option value="24">24</option>\n            <option value="25">25</option>\n            <option value="26">26</option>\n            <option value="27">27</option>\n            <option value="28">28</option>\n            <option value="29">29</option>\n            <option value="30">30</option>\n        </select>\n\n        <span ng-switch="vm.repeat.every">\n            <span ng-switch-when="day">días</span>\n            <span ng-switch-when="week">semanas</span>\n            <span ng-switch-when="month">meses</span>\n            <span ng-switch-when="year">años</span>\n        </span>\n    </div>\n\n    <div ng-show="vm.repeat.every == \'week\'" class="week">\n        <label>Día</label>\n        <ul>\n            <li>\n                <input type="checkbox" id="event-repeat-day-mo" ng-model="vm.checkedDays[1]" ng-change="vm.toggleDay(1, vm.checkedDays[1])" />\n                <label for="event-repeat-day-mo">L</label>\n            </li>\n            <li>\n                <input type="checkbox" id="event-repeat-day-tu" ng-model="vm.checkedDays[2]" ng-change="vm.toggleDay(2, vm.checkedDays[2])" />\n                <label for="event-repeat-day-tu">M</label>\n            </li>\n            <li>\n                <input type="checkbox" id="event-repeat-day-we" ng-model="vm.checkedDays[3]" ng-change="vm.toggleDay(3, vm.checkedDays[3])" />\n                <label for="event-repeat-day-we">X</label>\n            </li>\n            <li>\n                <input type="checkbox" id="event-repeat-day-th" ng-model="vm.checkedDays[4]" ng-change="vm.toggleDay(4, vm.checkedDays[4])" />\n                <label for="event-repeat-day-th">J</label>\n            </li>\n            <li>\n                <input type="checkbox" id="event-repeat-day-fr" ng-model="vm.checkedDays[5]" ng-change="vm.toggleDay(5, vm.checkedDays[5])" />\n                <label for="event-repeat-day-fr">V</label>\n            </li>\n            <li>\n                <input type="checkbox" id="event-repeat-day-sa" ng-model="vm.checkedDays[6]" ng-change="vm.toggleDay(6, vm.checkedDays[6])" />\n                <label for="event-repeat-day-sa">S</label>\n            </li>\n            <li>\n                <input type="checkbox" id="event-repeat-day-su" ng-model="vm.checkedDays[7]" ng-change="vm.toggleDay(7, vm.checkedDays[7])" />\n                <label for="event-repeat-day-su">D</label>\n            </li>\n        </ul>\n    </div>\n\n    <div ng-show="vm.repeat.every == \'month\'" class="month">\n        <label>Repetir cada</label>\n        <ul>\n            <li>\n                <input id="event-repeat-month-day" type="radio" value="" ng-model="vm.repeat.on" />\n                <label for="event-repeat-month-day">día del mes</label>\n            </li>\n            <li>\n                <input id="event-repeat-month-weekday" type="radio" value="weekday" ng-model="vm.repeat.on" />\n                <label for="event-repeat-month-weekday">día de la semana</label>\n            </li>\n        </ul>\n    </div>\n\n    <p ng-show="vm.repeat.every" class="summary">\n        <span>Este evento se repetirá </span><span ng-bind="vm.getSummary()"></span>\n    </p>\n\n</div>'),e.put("/components/elements/phi-notification-settings/phi-notification-settings.html",'<!-- Manual list of transports -->\n<section border-box ng-repeat="transport in vm.transports" ng-show="!!(vm.destinations|filter:{transport:transport.name}).length || (vm.allowEdit && transport.allowEdit)" class="phi-notification-transport phi-notification-transport-{{transport.name}}">\n\n    <h1 ng-bind="transport.label"></h1>\n\n    <div ng-repeat="destination in vm.destinations | filter: {transport:transport.name}" ng-class="{enabled: destination.isEnabled, disabled: !destination.isEnabled}">\n\n        <phi-notification-setting>\n\n            <div class="face" ng-click="destination.isExpanded = !destination.isExpanded">\n                <h1 ng-bind="destination.destination || transport.defaultText || \'predeterminado\'" phi-icon-left="{{destination.isExpanded ? \'fa-caret-down\' : \'fa-caret-right\'}}"></h1>\n            </div>\n\n            <div class="toggler">\n                <input id="toggle_{{destination.id}}" type="checkbox" class="tgl tgl-ios" ng-model="destination.isEnabled"  ng-change="vm.save(destination)" />\n                <label for="toggle_{{destination.id}}" class="tgl-btn"></label>\n            </div>\n\n            <div class="schedule" phi-icon="fa-clock-o">\n                <select ng-model="destination.schedule" ng-change="vm.save(destination)" ng-options="hour.value as hour.label for hour in vm.scheduleHours">\n                    <option value="">inmediato</option>\n                </select>\n            </div>\n\n            <button ng-if="transport.allowEdit && !!destination.destination" class="menu" phi-icon="fa-trash-o" ng-click="vm.remove(destination)"></button>\n            <button ng-if="!(transport.allowEdit && !!destination.destination)" class="menu"></button> <!-- placeholder -->\n\n        </phi-notification-setting>\n\n        <div class="subpreferences" phi-visible="{{!!destination.isExpanded}}" phi-visible-animation="scale">\n\n            <phi-notification-setting ng-repeat="(key, preference) in destination.preferences">\n                <div class="face">\n                    <h1 ng-bind="preference.type"></h1>\n                </div>\n                <div class="toggler">\n                    <input id="toggle_pref_{{key}}" type="checkbox" class="tgl tgl-ios" ng-model="preference.isEnabled"  ng-change="vm.save(destination)" />\n                    <label for="toggle_pref_{{key}}" class="tgl-btn"></label>\n                </div>\n                <div class="schedule" phi-icon="fa-clock-o">\n                    <select ng-model="preference.schedule" ng-change="vm.save(destination)" ng-options="hour.value as hour.label for hour in vm.scheduleHours">\n                        <option value="">{{destination.schedule ? \'consolidado\' : \'inmediato\'}}</option>\n                    </select>\n                </div>\n            </phi-notification-setting>\n\n        </div>\n\n    </div>\n\n    <div phi-visible="{{transport.isAdding}}" phi-visible-animation="scale" ng-init="transport.new = {transport: transport.name, isEnabled:true, destination: null, schedule: null}">\n        <phi-notification-setting>\n\n            <div class="face" style="display:flex">\n                <button phi-icon="fa-times" ng-click="transport.isAdding = false"></button>\n                <phi-input ng-model="transport.new.destination"></phi-input>\n            </div>\n\n            <div class="toggler">\n                <input id="new_{{transport.name}}" type="checkbox" class="tgl tgl-ios" ng-model="transport.isAdding"/>\n                <label for="new_{{transport.name}}" class="tgl-btn"></label>\n            </div>\n\n            <div class="schedule" phi-icon="fa-clock-o">\n                <select ng-model="transport.new.schedule" ng-change="vm.save(destination)" ng-options="hour.value as hour.label for hour in vm.scheduleHours">\n                    <option value="">{{destination.schedule ? \'consolidado\' : \'inmediato\'}}</option>\n                </select>\n            </div>\n\n            <button class="menu" ng-click="vm.save(transport.new); transport.isAdding = false; transport.new = {transport: transport.name, isEnabled:true, destination: null, schedule: null}" phi-icon="fa-check"></button>\n\n        </phi-notification-setting>\n    </div>\n\n    <phi-notification-setting class="adder" ng-if="vm.allowEdit && transport.allowEdit" ng-click="transport.isAdding = true" phi-visible="{{!transport.isAdding}}" phi-visible-animation="scale">\n        <div class="face">\n            <h1 phi-icon-left="fa-plus">agregar destinatario</h1>\n        </div>\n    </phi-notification-setting>\n\n</section>'),e.put("/components/elements/phi-post/phi-post.html",'<phi-post-header>\r\n    <phi-post-icon>\r\n        <iron-image ng-src="{{vm.post.author.avatar}}" sizing="cover"></iron-image>\r\n    </phi-post-icon>\r\n    <phi-post-preview>\r\n        <phi-post-author ng-bind="vm.post.author.firstName + \' \' + vm.post.author.lastName"></phi-post-author>\r\n        <phi-post-date ng-bind="vm.post.publishDate"></phi-post-date>\r\n    </phi-post-preview>\r\n</phi-post-header>\r\n<phi-post-body>\r\n    <!--<phi-post-description ng-bind-html="vm.post.description"></phi-post-description>-->\r\n    <phi-post-blocks>\r\n        <phi-block\r\n            ng-repeat="block in vm.post.blocks"\r\n            ng-model="block">\r\n        </phi-block>\r\n    </phi-post-blocks>\r\n</phi-post-body>'),e.put("/components/elements/phi-post-editor/phi-post-editor.html",'<div>\n\n    <div sv-root sv-part="vm.post.blocks" sv-on-sort="vm.reorder()">\n\n        <div ng-repeat="(key, block) in vm.post.blocks" ng-init="block.ctrl = {}" class="phi-post-editor-block" sv-element>\n\n            <div class="phi-post-editor-block-toolbar">\n\n                <div class="phi-post-editor-block-toolbar-handle" sv-handle></div>\n\n                <div ng-if="block.ctrl.menu" class="phi-post-editor-block-toolbar-menu">\n\n                    <phi-button\n                        id="menu_toggler_{{block.id}}_{{key}}"\n                        class="cancel"\n                        ng-blur="block.menuShown = false"\n                        ng-show="block.ctrl.currentState == \'default\'"\n                        ng-click="block.menuShown = !block.menuShown"\n                        phi-icon="fa-ellipsis-v">\n                    </phi-button>\n\n                    <phi-button\n                        class="cancel"\n                        ng-blur="block.menuShown = false"\n                        ng-show="block.ctrl.currentState != \'default\'"\n                        ng-click="block.ctrl.go(\'default\')"\n                        phi-icon="fa-arrow-left">\n                    </phi-button>\n\n                    <div\n                        phi-tooltip-for="menu_toggler_{{block.id}}_{{key}}"\n                        phi-tooltip-origin="top right"\n                        phi-tooltip-align="bottom right"\n                        phi-visible="{{!!block.menuShown}}"\n                        phi-visible-animation="slide-bottom">\n\n                        <phi-menu phi-texture="paper">\n                            <phi-menu-item ng-repeat="action in block.ctrl.menu" ng-click="block.menuShown = false; block.ctrl.go(action.state)" phi-icon-left="{{action.icon}}">\n                                {{action.label}}\n                            </phi-menu-item>\n                            <!--<phi-menu-item ng-repeat="item in block.ctrl.states" ng-click="block.menuShown = false; block.ctrl.go(item)">\n                                <phi-icon icon="{{item.icon}}"></phi-icon>\n                                {{item}}\n                            </phi-menu-item>-->\n                        </phi-menu>\n                    </div>\n                </div>\n\n            </div>\n\n            <phi-block\n                ng-model="block"\n                controller-assign="block.ctrl"\n                on-change="vm.attachBlock(block)"\n                on-destroy="vm.removeBlock(block)"\n            >\n            </phi-block>\n\n        </div>\n\n    </div>\n\n\n    <div>\n        <div phi-visible="{{!!adderIsOpen}}" phi-visible-animation="scale">\n            <phi-list-item ng-repeat="insertable in vm.insertable" ng-click="$parent.adderIsOpen = false; vm.addBlock(insertable);" phi-icon-left="{{insertable.icon}}">\n                <span ng-bind="insertable.title"></span>\n            </phi-list-item>\n        </div>\n\n        <phi-list-item ng-click="adderIsOpen = !adderIsOpen" phi-icon-left="{{adderIsOpen ? \'fa-times\' : \'fa-plus\'}}">\n            <span ng-bind="adderIsOpen ? \'cancelar\' : \'adjuntar\'"></span>\n        </phi-list-item>        \n    </div>\n\n\n</div>'),
e.put("/components/elements/phi-notification-settings/phi-notification-settings.orig/phi-notification-settings.html",'<phi-setting ng-repeat="setting in vm.settings" class="setting-transport transport-{{setting.transport}}" ng-class="{open: setting.isOpen, closed: !setting.isOpen, enabled: setting.isEnabled, disabled: !setting.isEnabled}">\n\n    <phi-setting-header ng-click="setting.isOpen = !setting.isOpen">\n        <phi-setting-icon></phi-setting-icon>\n        <phi-setting-contents>\n            <phi-setting-title ng-bind="vm.getTransportName(setting.transport)"></phi-setting-title>\n            <phi-setting-notice ng-repeat="notice in vm.describeSetting(setting)" ng-bind="notice"></phi-setting-notice>\n        </phi-setting-contents>\n    </phi-setting-header>\n\n    <phi-setting-body>\n\n        <phi-checkbox ng-model="setting.isEnabled">recibir notificaciones</phi-checkbox>\n\n        <phi-setting-schedule>\n            <phi-checkbox ng-model="setting.hasSchedule" ng-change="vm.toggleScheduling(setting, setting.hasSchedule)">consolidar en un envio diario</phi-checkbox>\n            <div phi-visible="{{!!setting.hasSchedule}}" phi-visible-animation="scale" class="bootstrap">\n                <!--<uib-timepicker class="bootstrap" ng-model="setting.scheduleDate" minute-step="10" ng-change="setting.schedule = vm.toHour(setting.scheduleDate)"></uib-timepicker>-->\n                <input bs-timepicker autoclose="false" type="text" name="endTime" ng-model="setting.scheduleDate" class="form-control" size="8" placeholder="hora" />\n            </div>\n        </phi-setting-schedule>\n\n        <phi-drawer ng-class="{open: setting.drawerIsOpen, closed: !setting.drawerIsOpen}">\n\n            <phi-drawer-title ng-click="setting.drawerIsOpen = !setting.drawerIsOpen">filtrar por tipo</phi-drawer-title>\n\n            <phi-drawer-body>\n                <phi-setting ng-repeat="typeSetting in setting.types" ng-class="{open: typeSetting.isOpen, closed: !typeSetting.isOpen, enabled: typeSetting.isEnabled, disabled: !typeSetting.isEnabled}">\n                    <phi-setting-header ng-click="typeSetting.isOpen = !typeSetting.isOpen">\n                        <phi-setting-icon>{{type.icon}}</phi-setting-icon>\n                        <phi-setting-contents>\n                            <phi-setting-title ng-bind="typeSetting.type"></phi-setting-title>\n                            <phi-setting-notice ng-repeat="notice in vm.describeSetting(typeSetting)" ng-bind="notice"></phi-setting-notice>\n                        </phi-setting-contents>\n                    </phi-setting-header>\n                    <phi-setting-body>\n                        <phi-checkbox ng-model="typeSetting.isEnabled">recibir notificaciones</phi-checkbox>\n                        <phi-setting-schedule>\n                            <phi-checkbox ng-model="typeSetting.hasSchedule" ng-change="vm.toggleScheduling(typeSetting, typeSetting.hasSchedule)">consolidar en un envio diario</phi-checkbox>\n                            <div phi-visible="{{!!typeSetting.hasSchedule}}" phi-visible-animation="scale" class="bootstrap">\n                                <!--<uib-timepicker class="bootstrap" ng-model="typeSetting.scheduleDate" minute-step="10" ng-change="typeSetting.schedule = vm.toHour(typeSetting.scheduleDate)"></uib-timepicker>-->\n                                <input bs-timepicker autoclose="false" type="text" name="endTime" ng-model="typeSetting.scheduleDate" class="form-control" size="8" placeholder="hora" />\n                            </div>\n                        </phi-setting-schedule>\n                    </phi-setting-body>\n                </phi-setting>\n            </phi-drawer-body>\n\n        </phi-drawer>\n\n    </phi-setting-body>\n</phi-setting>\n\n<phi-button ng-click="vm.save()">Guardar</phi-button>')}]);