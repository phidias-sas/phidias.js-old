!function(){"use strict";angular.module("phidias-demo-app",["phidias-angular","ui.router","ngAnimate"])}(),function(){"use strict";function e(e){e.otherwise(function(e,n){var t=e.get("$state");t.go("home")})}function n(e,n,t,i){e.$state=n,e.phiApp=i,e.phiApi=t,e.$on("$stateChangeStart",function(n,t,i,r,a){e.stateChangeDirection="right",void 0!=r.data&&void 0!=r.data.order&&void 0!=t.data&&void 0!=t.data.order&&(e.stateChangeDirection=r.data.order<t.data.order?"right":"left")})}angular.module("phidias-demo-app").config(e).run(n),e.$inject=["$urlRouterProvider"],n.$inject=["$rootScope","$state","phiApi","phiApp"]}(),angular.module("phidias-demo-app").animation(".main-view",["$timeout",function(e){var n=290,t=null;return{enter:function(i,r){return t=i.find("phi-state-cover"),i.addClass("ng-enter"),e(function(){i.addClass("ng-enter-active")},0),e(function(){i.removeClass("ng-enter ng-enter-active"),r()},n),function(e){}},leave:function(i,r){var a=t[0].clientHeight,c=i.find("phi-state-cover");return c.css("max-height","none"),c.css("height",c[0].clientHeight+"px"),t.css("height",c[0].clientHeight+"px"),i.addClass("ng-leave"),e(function(){i.addClass("ng-leave-active"),c.css("height",a+"px"),t.css("height",a+"px")},0),e(function(){i.removeClass("ng-leave ng-leave-active"),c.css("height","auto"),t.css("height","auto"),r()},n),function(e){}}}}]),function(){"use strict";function e(e){e.state("center",{"abstract":!0,url:"/centers/:centerId",templateUrl:"/application/states/center/center.html",controller:n,controllerAs:"vm",data:{order:1}})}function n(e,n){function t(){r.load()}var i="/centers/"+e.params.centerId,r=this;r.centerId=e.params.centerId,r.isLoading=!1,r.center=null,r.load=function(){r.isLoading=!0,n.get(i).then(function(e){r.center=e.data})["finally"](function(){r.isLoading=!1})},t()}angular.module("phidias-demo-app").config(e),e.$inject=["$stateProvider"],n.$inject=["$state","phiApi"]}(),function(){"use strict";function e(e){e.state("city",{url:"/cities/:city",templateUrl:"/application/states/city/city.html",controller:n,controllerAs:"vm"})}function n(e,n){function t(){i.find()}var i=this;i.city=e.params.city,i.centers=[],i.isLoading=!1,i.page=1,i.total=null,i.find=function(e){e=void 0==e?"":e.trim(),i.isLoading=!0,n.get("centers",{page:i.page,search:e,"filters[city]":i.city}).then(function(e){i.centers=e.data,i.page=parseInt(e.headers("x-phidias-collection-page")),i.total=parseInt(e.headers("x-phidias-collection-total"))})["finally"](function(){i.isLoading=!1})},t()}angular.module("phidias-demo-app").config(e),e.$inject=["$stateProvider"],n.$inject=["$state","phiApi"]}(),function(){"use strict";function e(e){e.state("home",{url:"/",templateUrl:"/application/states/home/home.html",controller:n,controllerAs:"vm"})}function n(e){function n(){t.find()}var t=this;t.query=null,t.cities=[],t.centers=[],t.isLoading=!1,t.find=function(n){void 0==n&&(n=""),n=n.trim(),t.isLoading=!0,e.get("regions/all/cities",{limit:n?6:3,search:n}).then(function(e){t.cities=e.data,t.isLoading=!1}),n?e.get("centers",{search:n}).then(function(e){t.centers=e.data})["finally"](function(){t.isLoading=!1}):t.centers=[]},n()}angular.module("phidias-demo-app").config(e),e.$inject=["$stateProvider"],n.$inject=["phiApi"]}(),function(){"use strict";function e(e){e.state("sample",{"abstract":!0,url:"/sample",templateUrl:"/application/states/sample/sample.html",controller:n,controllerAs:"vm",data:{order:1}})}function n(e,n,t){var i=this;i.title="sample",i.description="some description",i.foo="FOO"}angular.module("phidias-demo-app").config(e),e.$inject=["$stateProvider"],n.$inject=["$state","$scope","phiApi"]}(),function(){"use strict";function e(e){e.state("center.home",{url:"/home",templateUrl:"/application/states/center/home/home.html",controller:n,controllerAs:"vm"})}function n(e,n,t){n.$parent.vm.center}angular.module("phidias-demo-app").config(e),e.$inject=["$stateProvider"],n.$inject=["$state","$scope","phiApi"]}(),function(){"use strict";function e(e){e.state("sample.child",{url:"/:id",templateUrl:"/application/states/sample/child/child.html",controller:n,controllerAs:"vm"})}function n(e,n,t){var i=this;i.id=e.params.id,i.title="sample",i.description="some description";var r=n.$parent.vm;r.description="At state "+i.id,r.isCollapsed="one"!=i.id}angular.module("phidias-demo-app").config(e),e.$inject=["$stateProvider"],n.$inject=["$state","$scope","phiApi"]}(),angular.module("phidias-demo-app").run(["$templateCache",function(e){e.put("/application/states/center/center.html",'<phi-state class="state-center">\r\n    <phi-state-cover style="background-image: url(\'img/cover.jpg\')" phi-color-tint="#01579b" ng-class="{collapsed: !!vm.isCollapsed}">\r\n        <div class="header">\r\n            <h1 ng-bind="vm.center.name"></h1>\r\n            <p ng-bind="vm.center.category"></p>\r\n        </div>\r\n    </phi-state-cover>\r\n\r\n    <phi-state-navigation>\r\n        <phi-menu>\r\n            <phi-menu-item ui-sref="center.home({centerId: vm.centerId})" ui-sref-active="active">Inicio</phi-menu-item>\r\n            <phi-menu-item ui-sref="center.facilities({centerId: vm.centerId})" ui-sref-active="active">Instalaciones</phi-menu-item>\r\n            <phi-menu-item ui-sref="center.admissions({centerId: vm.centerId})" ui-sref-active="active">Admisiones</phi-menu-item>\r\n        </phi-menu>\r\n    </phi-state-navigation>\r\n\r\n    <phi-state-contents ui-view>\r\n        <h1>... loading ...</h1>\r\n    </phi-state-contents>\r\n</phi-state>'),e.put("/application/states/city/city.html",'<phi-state id="city">\r\n    <phi-state-cover style="background-image: url(\'http://beta.mejorescolegios.es/img/cities/{{vm.city}}.jpg\')" phi-color-tint="#000">\r\n        <div class="header">\r\n            <div class="search" phi-icon-left="{{vm.isLoading ? \'fa-spinner\' : \'fa-search\'}}" phi-icon-animation="{{vm.isLoading ? \'spin\' : \'\'}}">\r\n                <input type="text"\r\n                    placeholder="Busca colegios en {{vm.city}}"\r\n                    ng-model="vm.query"\r\n                    ng-model-options="{debounce: 400}"\r\n                    ng-change="vm.find(vm.query)"\r\n                />\r\n            </div>\r\n        </div>\r\n    </phi-state-cover>\r\n\r\n    <phi-state-contents>\r\n\r\n        <h1 class="total">\r\n            <strong ng-bind="vm.isLoading ? \'buscando\' : vm.total"></strong>\r\n            <span>colegios en</span>\r\n            <span ng-bind="vm.city"></span>\r\n        </h1>\r\n\r\n        <section id="centers" phi-grid>\r\n\r\n            <a ng-repeat="center in vm.centers" ui-sref="center.home({centerId: center.id})" target="_blank">\r\n                <phi-card class="center">\r\n                    <phi-card-cover style="background-image: url(\'{{center.cover}}\'), url(\'img/cover.jpg\')" phi-color-tint="#444">\r\n                        <h1 class="title" ng-bind="center.name"></h1>\r\n                    </phi-card-cover>\r\n\r\n                    <phi-card-contents>\r\n                        <div class="logo" ng-if="center.logo">\r\n                            <img ng-src="{{center.logo}}" alt="{{center.name}}" />\r\n                        </div>\r\n                        <p class="description" ng-bind="center.category"></p>\r\n                        <p class="address" phi-icon-left="fa-map-marker">{{center.address}}, {{center.city}}, {{center.region}}, {{center.postalCode}}</p>\r\n                    </phi-card-contents>\r\n                </phi-card>\r\n            </a>\r\n\r\n        </section>\r\n\r\n\r\n    </phi-state-contents>\r\n\r\n</phi-state>'),e.put("/application/states/home/home.html",'<phi-state id="home">\r\n    <phi-state-cover style="background-image: url(\'img/cover.jpg\')" phi-color-tint="#01579b" ng-class="{collapsed: searchIsFocused || !!vm.query}">\r\n        <div class="header">\r\n            <h1>Encuentra el mejor colegio</h1>\r\n            <div class="search" phi-icon-left="{{vm.isLoading ? \'fa-spinner\' : \'fa-search\'}}" phi-icon-animation="{{vm.isLoading ? \'spin\' : \'\'}}">\r\n                <input type="text"\r\n                    placeholder="Busca por ciudad o nombre del colegio"\r\n                    ng-model="vm.query"\r\n                    ng-model-options="{debounce: 400}"\r\n                    ng-change="vm.find(vm.query)"\r\n                    ng-focus="searchIsFocused = true"\r\n                    ng-blur="searchIsFocused = false" \r\n                />\r\n            </div>\r\n        </div>\r\n    </phi-state-cover>\r\n\r\n    <phi-state-contents>\r\n\r\n        <section id="cities" phi-grid>\r\n\r\n            <phi-card class="city" ng-repeat="city in vm.cities" ui-sref="city({city: city.name})">\r\n                <phi-card-cover style="background-image: url(\'http://beta.mejorescolegios.es/img/cities/{{city.name}}.jpg\')"></phi-card-cover>\r\n                <phi-card-contents>\r\n                    <h1 ng-bind="city.name"></h1>\r\n                    <p><strong ng-bind="city.count"></strong> colegios</p>\r\n                </phi-card-contents>\r\n            </phi-card>\r\n\r\n        </section>\r\n\r\n        <section id="centers" phi-grid>\r\n\r\n            <phi-card class="center" ng-repeat="center in vm.centers" ui-sref="center.home({centerId: center.id})">\r\n                <phi-card-cover style="background-image: url(\'{{center.cover}}\'), url(\'img/cover.jpg\')">\r\n                    <h1 class="title" ng-bind="center.name"></h1>\r\n                </phi-card-cover>\r\n                <phi-card-contents>\r\n                    <div class="logo" ng-if="center.logo">\r\n                        <img ng-src="{{center.logo}}" alt="{{center.name}}" />\r\n                    </div>\r\n                    <p class="description" ng-bind="center.category"></p>\r\n                    <p class="address" phi-icon-left="fa-map-marker">{{center.address}}, {{center.city}}, {{center.region}}, {{center.postalCode}}</p>\r\n                </phi-card-contents>\r\n            </phi-card>\r\n\r\n        </section>\r\n\r\n    </phi-state-contents>\r\n\r\n</phi-state>'),e.put("/application/states/sample/sample.html",'<phi-state class="state-sample">\r\n    <phi-state-cover style="background-image: url(\'img/cover.jpg\')" phi-color-tint="#01579b" ng-class="{collapsed: !!vm.isCollapsed}">\r\n        <div>\r\n            <h1 ng-bind="vm.title"></h1>\r\n            <p ng-bind="vm.description"></p>\r\n        </div>\r\n    </phi-state-cover>\r\n\r\n    <phi-state-navigation>\r\n        <phi-menu>\r\n            <phi-menu-item ui-sref="sample.child({id: \'one\'})" ui-sref-active="active">One</phi-menu-item>\r\n            <phi-menu-item ui-sref="sample.child({id: \'two\'})" ui-sref-active="active">Two</phi-menu-item>\r\n            <phi-menu-item ui-sref="sample.child({id: \'three\'})" ui-sref-active="active">Three</phi-menu-item>\r\n        </phi-menu>\r\n    </phi-state-navigation>\r\n\r\n    <phi-state-contents ui-view>\r\n        <h1>... loading ...</h1>\r\n    </phi-state-contents>\r\n</phi-state>'),e.put("/application/states/center/home/home.html","<div>\r\n    <h1>Detalles del centro</h1>\r\n</div>"),e.put("/application/states/sample/child/child.html",'<div>\r\n    <h1>State <strong ng-bind="vm.id"></strong></h1>\r\n</div>')}]);